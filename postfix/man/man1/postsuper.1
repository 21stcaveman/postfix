.TH POSTSUPER 1 
.ad
.fi
.SH NAME
postsuper
\-
Postfix super intendent
.SH SYNOPSIS
.na
.nf
.fi
\fBpostsuper\fR [\fB-psv\fR] [\fB-d \fIqueue_id\fR]
[\fB-r \fIqueue_id\fR] [\fIdirectory ...\fR]
.SH DESCRIPTION
.ad
.fi
The \fBpostsuper\fR command does small maintenance jobs. Use of
the command is restricted to the super-user.

By default, \fBpostsuper\fR performs the operations requested with the
\fB-s\fR and \fB-p\fR command-line options on the named Postfix queue
directories (default: all).
Directory names are relative to the Postfix top-level queue directory.

Options:
.IP \fB-d \fIqueue_id\fR
This option ignores any \fIdirectory\fR argument(s).
Delete one message queue file with the named queue ID.  Specify
multiple \fB-d\fR options to delete multiple queue files by name.
.sp
Alternatively, if a \fIqueue_id\fR of \fB-\fR is specified, the
program reads queue IDs from standard input.
.sp
The \fBpostsuper\fR exit status is non-zero when no message queue
file was deleted.
.sp
.ft B
There is a very small possibility that postsuper deletes the
wrong message file when it is executed while the Postfix mail
system is running.
.ft R
.sp
The scenario is as follows:
.RS
.IP \(bu
The Postfix queue manager deletes the file that \fBpostsuper\fR
was supposed to delete, because Postfix was finished with the
message.
.IP \(bu
New mail arrives, and the new message is given the same queue ID
as the message that \fBpostsuper\fR was supposed to delete.
The probability for reusing a deleted queue ID is about 1 in 2**15
(the number of different microsecond values that the system clock
can distinguish within a second).
.IP \(bu
\fBpostsuper\fR deletes the new message file, instead of the
old file that should have been deleted.
.RE
.IP \fB-r \fIqueue_id\fR
This option ignores any \fIdirectory\fR argument(s).
Requeue one message queue file with the named queue ID.  Specify
multiple \fB-r\fR options to requeue multiple queue files by name.
.sp
Alternatively, if a \fIqueue_id\fR of \fB-\fR is specified, the
program reads queue IDs from standard input.
.sp
The queue file is moved to the maildrop queue, from where
it is copied by the pickup daemon to a new file whose name
is guaranteed to match the queue file inode number. This
feature is useful for queue files from another machine or
for files restored from backup. The new queue file is
subjected again to address rewriting and substitution.
.sp
The \fBpostsuper\fR exit status is non-zero when no message queue
file was requeued.
.IP \fB-s\fR
Structure check.  Move queue files that are in the wrong place
in the file system hierarchy and remove subdirectories that are
no longer needed. File rearrangements are necessary after a change
in the \fBhash_queue_names\fR and/or \fBhash_queue_depth\fR
configuration parameters. It is highly recommended to run this
check once before Postfix startup.
.IP \fB-p\fR
Purge stale files (files that are left over after system or
software crashes).
.IP \fB-v\fR
Enable verbose logging for debugging purposes. Multiple \fB-v\fR
options make the software increasingly verbose.
.SH DIAGNOSTICS
.ad
.fi
Problems are reported to the standard error stream and to
\fBsyslogd\fR.
.SH CONFIGURATION PARAMETERS
.na
.nf
.ad
.fi
See the Postfix \fBmain.cf\fR file for syntax details and for
default values.
.IP \fBhash_queue_depth\fR
Number of subdirectory levels for hashed queues.
.IP \fBhash_queue_names\fR
The names of queues that are organized into multiple levels of
subdirectories.
.SH LICENSE
.na
.nf
.ad
.fi
The Secure Mailer license must be distributed with this software.
.SH AUTHOR(S)
.na
.nf
Wietse Venema
IBM T.J. Watson Research
P.O. Box 704
Yorktown Heights, NY 10598, USA
