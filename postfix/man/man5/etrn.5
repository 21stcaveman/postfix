.TH ETRN 5 
.ad
.fi
.SH NAME
etrn
\-
format of Postfix etrn table
.SH SYNOPSIS
.na
.nf
\fBetrn_maps = hash:/etc/postfix/etrn\fR
\fBetrn_maps = dbm:/etc/postfix/etrn\fR

\fBpostmap /etc/postfix/etrn\fR
.SH DESCRIPTION
.ad
.fi
The optional \fBetrn\fR file specifies what destination domain
names can be specified in SMTP \fBETRN\fR commands. This information
is used by the \fBsmtpd\fR(8) and \fBflushd\fR(8) daemon.

Normally, the file serves as input to the \fBpostmap\fR(1) command.
The result, an indexed file in \fBdbm\fR or \fBdb\fR format,
is used for fast searching by the mail system. Execute the command
\fBpostmap /etc/postfix/etrn\fR in order to rebuild the indexed
file after changing the etrn table.

When the table is provided via other means such as NIS, LDAP,
SQL, or as regular expressions, the same lookups are done as
for ordinary indexed files.
.SH TABLE FORMAT
.na
.nf
.ad
.fi
The format of the \fBetrn\fR table is as follows:
.IP "blanks and comments"
Blank lines are ignored, as are lines beginning with `#'.
.IP "\fIdomain restrictions\fR"
The left-hand side, \fIdomain\fR, specifies a destination domain
name that can be specified in \fBETRN\fR commands.
.sp
The right-hand side specifies one or more access restrictions.
Restrictions are processed in the given order and the search
stops at the first match.
.RS
.IP \fBreject_unknown_client\fR
Reject the request if the client hostname is unknown.
.IP \fBpermit_mynetworks\fR
Permit the request if the client address matches $mynetworks.
.IP \fBreject_maps_rbl\fR
Reject the request if the reverse client network address
is listed under $maps_rbl_domains.
.IP \fBreject\fR
Reject the request. Place this at the end of a restriction list.
.IP \fBpermit\fR
Permit the request. Place this at the end of a restriction list.
.RE
.PP
.SH CONFIGURATION PARAMETERS
.na
.nf
.ad
.fi
The following \fBmain.cf\fR parameters are especially relevant to
this topic. See the Postfix \fBmain.cf\fR file for syntax details
and for default values. Use the \fBpostfix reload\fR command after
a configuration change.
.IP \fBetrn_maps\fR
Tables that specify what domains have \fBETRN\fR service.  For each
table entry, the left-hand side specifies a destination domain name
that can be specified in an \fBETRN\fR request, and the right-hand
side specifies a list of access restrictions for SMTP clients that
issue \fBETRN\fR for the domain.
.IP \fBfast_flush_maps\fR
The table with names of destinations that this MTA provides the
fast flush service for. By default, this is set to $\fBetrn_maps\fR.
.IP \fBrelay_domains\fR
The list of domains that this MTA is willing to forward mail from
or to. This defaults to \fB$mydestination, $fast_flush_maps\fR.
.SH SEE ALSO
.na
.nf
smtpd(8) Postfix SMTP server
flushd(1) Postfix fast flush service
sendmail(5) sendmail-compatible interface
pcre_table(5) format of PCRE tables
regexp_table(5) format of POSIX regular expression tables
.SH LICENSE
.na
.nf
.ad
.fi
The Secure Mailer license must be distributed with this software.
.SH AUTHOR(S)
.na
.nf
Wietse Venema
IBM T.J. Watson Research
P.O. Box 704
Yorktown Heights, NY 10598, USA
