<html> <body> <pre>
SMTP(8)                                                   SMTP(8)

<b>NAME</b>
       smtp - Postfix remote delivery via SMTP

<b>SYNOPSIS</b>
       <b>smtp</b> [generic Postfix daemon options]

<b>DESCRIPTION</b>
       The  SMTP  client processes message delivery requests from
       the queue manager. Each request specifies a queue file,  a
       sender address, a domain or host to deliver to, and recip-
       ient information.  This program expects to be run from the
       <a href="master.8.html"><b>master</b>(8)</a> process manager.

       The  SMTP  client updates the queue file and marks recipi-
       ents as finished, or it informs  the  queue  manager  that
       delivery  should  be tried again at a later time. Delivery
       problem reports are sent to the <a href="bounce.8.html"><b>bounce</b>(8)</a> or <a href="defer.8.html"><b>defer</b>(8)</a> dae-
       mon as appropriate.

       The  SMTP  client  looks  up  a  list  of  mail  exchanger
       addresses for the destination  host,  sorts  the  list  by
       preference,  and  connects to each listed address until it
       finds a server that responds.

       Once the SMTP client has received the server greeting ban-
       ner, no error will cause it to proceed to the next address
       on the mail exchanger list. Instead, the message is either
       bounced, or its delivery is deferred until later.

<b>SECURITY</b>
       The SMTP client is moderately security-sensitive. It talks
       to SMTP servers and to DNS servers  on  the  network.  The
       SMTP client can be run chrooted at fixed low privilege.

<b>STANDARDS</b>
       <a href="http://www.faqs.org/rfcs/rfc821.html">RFC 821</a> (SMTP protocol)
       <a href="http://www.faqs.org/rfcs/rfc822.html">RFC 822</a> (ARPA Internet Text Messages)
       <a href="http://www.faqs.org/rfcs/rfc1651.html">RFC 1651</a> (SMTP service extensions)
       <a href="http://www.faqs.org/rfcs/rfc1652.html">RFC 1652</a> (8bit-MIME transport)
       <a href="http://www.faqs.org/rfcs/rfc1870.html">RFC 1870</a> (Message Size Declaration)
       <a href="http://www.faqs.org/rfcs/rfc2045.html">RFC 2045</a> (MIME: Format of Internet Message Bodies)
       <a href="http://www.faqs.org/rfcs/rfc2046.html">RFC 2046</a> (MIME: Media Types)
       <a href="http://www.faqs.org/rfcs/rfc2554.html">RFC 2554</a> (AUTH command)
       <a href="http://www.faqs.org/rfcs/rfc2821.html">RFC 2821</a> (SMTP protocol)
       <a href="http://www.faqs.org/rfcs/rfc2920.html">RFC 2920</a> (SMTP Pipelining)

<b>DIAGNOSTICS</b>
       Problems  and transactions are logged to <b>syslogd</b>(8).  Cor-
       rupted message files are marked so that the queue  manager
       can move them to the <b>corrupt</b> queue for further inspection.

       Depending on the setting of the <b>notify_classes</b>  parameter,
       the  postmaster is notified of bounces, protocol problems,
       and of other trouble.

<b>BUGS</b>
<b>CONFIGURATION PARAMETERS</b>
       The following <b>main.cf</b> parameters are  especially  relevant
       to  this  program. See the Postfix <b>main.cf</b> file for syntax
       details and for default values.  Use  the  <b>postfix  reload</b>
       command after a configuration change.

<b>Miscellaneous</b>
       <b>best_mx_transport</b>
              Name  of  the  delivery  transport  to use when the
              local machine is the most-preferred mail  exchanger
              (by  default,  a  mailer  loop is reported, and the
              message is bounced).

       <b>debug_peer_level</b>
              Verbose logging  level  increment  for  hosts  that
              match a pattern in the <b>debug_peer_list</b> parameter.

       <b>debug_peer_list</b>
              List  of  domain or network patterns. When a remote
              host matches a pattern, increase the  verbose  log-
              ging   level   by   the  amount  specified  in  the
              <b>debug_peer_level</b> parameter.

       <b>disable_dns_lookups</b>
              Disable DNS lookups. This means that mail  must  be
              forwarded via a smart relay host.

       <b>smtp_host_lookup</b>
              What  host  lookup mechanism the SMTP client should
              use.  Specify <b>dns</b> (use DNS  lookup)  and/or  <b>native</b>
              (use  the  native  naming  service  which also uses
              /etc/hosts).  This  setting  is  ignored  when  DNS
              lookups are disabled.

       <b>error_notice_recipient</b>
              Recipient    of   protocol/policy/resource/software
              error notices.

       <b>fallback_relay</b>
              Hosts to hand off mail to if a message  destination
              is not found or if a destination is unreachable.

       <b>ignore_mx_lookup_error</b>
              When a name server fails to respond to an MX query,
              search for an A record, instead of  deferring  mail
              delivery.

       <b>inet_interfaces</b>
              The network interface addresses that this mail sys-
              tem receives mail on. When any of  those  addresses
              appears in the list of mail exchangers for a remote
              destination, the list is truncated  to  avoid  mail
              delivery  loops.   See  also  the  <b>proxy_interfaces</b>
              parameter.

       <b>notify_classes</b>
              When this parameter includes  the  <b>protocol</b>  class,
              send  mail  to  the  postmaster with transcripts of
              SMTP sessions with protocol errors.

       <b>proxy_interfaces</b>
              Network interfaces that this mail  system  receives
              mail on by way of a proxy or network address trans-
              lator. When any of those addresses appears  in  the
              list  of  mail exchangers for a remote destination,
              the list is truncated to avoid mail delivery loops.
              See also the <b>inet_interfaces</b> parameter.

       <b>smtp_always_send_ehlo</b>
              Always send EHLO at the start of a connection.

       <b>smtp_never_send_ehlo</b>
              Never send EHLO at the start of a connection.

       <b>smtp_bind_address</b>
              Numerical  source  network  address to bind to when
              making a connection.

       <b>smtp_defer_if_no_mx_address_found</b>
              If no, bounce mail when no MX host resolves  to  an
              address (Postfix always ignores MX hosts with equal
              or worse preference than the local MTA).   If  yes,
              keep  trying  until  a suitable MX host resolves or
              until the mail is too old.

       <b>smtp_line_length_limit</b>
              Length limit for SMTP message content  lines.  Zero
              means  no  limit.   Some  SMTP servers misbehave on
              long lines.

       <b>smtp_helo_name</b>
              The hostname to be used in HELO and EHLO  commands.

       <b>smtp_quote_rfc821_envelope</b>
              Whether  or  not  to  quote  MAIL  FROM and RCPT TO
              addresses as per the rules laid out in <a href="http://www.faqs.org/rfcs/rfc821.html">RFC 821</a>.

       <b>smtp_skip_4xx_greeting</b>
              Skip servers that greet us with a 4xx status  code.

       <b>smtp_skip_5xx_greeting</b>
              Skip  servers that greet us with a 5xx status code.

       <b>smtp_skip_quit_response</b>
              Do not wait for the server response  after  sending
              QUIT.

       <b>smtp_pix_workaround_delay_time</b>
              The  time  to pause before sending .&lt;CR&gt;&lt;LF&gt;, while
              working   around    the    CISCO    PIX    firewall
              &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt; bug.

       <b>smtp_pix_workaround_threshold_time</b>
              The  time a message must be queued before the CISCO
              PIX firewall &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;  bug  workaround  is
              turned on.

<b>MIME Conversion</b>
       <b>disable_mime_output_conversion</b>
              Disable  the  conversion of 8BITMIME format to 7BIT
              format when the remote system  does  not  advertise
              8BITMIME support.

       <b>mime_boundary_length_limit</b>
              The amount of space that will be allocated for MIME
              multipart boundary strings. The MIME  processor  is
              unable to distinguish between boundary strings that
              do   not   differ   in   the   first   <b>$mime_bound-</b>
              <b>ary_length_limit</b> characters.

       <b>mime_nesting_limit</b>
              The  maximal  nesting  level of multipart mail that
              the MIME processor can handle. Refuse mail that  is
              nested deeper, when converting from 8BITMIME format
              to 7BIT format.

       <b>smtp_send_xforward_command</b>
              If the SMTP server announces XFORWARD support, send
              the  name,  address,  protocol and HELO name of the
              original client. This can be used to forward client
              information  through  a  content  filter to a down-
              stream queuing SMTP server.

<b>Authentication controls</b>
       <b>smtp_sasl_auth_enable</b>
              Enable per-session authentication as per  <a href="http://www.faqs.org/rfcs/rfc2554.html">RFC  2554</a>
              (SASL).   By default, Postfix is built without SASL
              support.

       <b>smtp_sasl_password_maps</b>
              Lookup tables with per-host or domain <i>name</i>:<i>password</i>
              entries.   No  entry for a host means no attempt to
              authenticate.

       <b>smtp_sasl_security_options</b>
              Zero or more of the following.

              <b>noplaintext</b>
                     Disallow  authentication  methods  that  use
                     plaintext passwords.

              <b>noactive</b>
                     Disallow  authentication  methods  that  are
                     vulnerable to non-dictionary active attacks.

              <b>nodictionary</b>
                     Disallow  authentication  methods  that  are
                     vulnerable to passive dictionary attack.

              <b>noanonymous</b>
                     Disallow anonymous logins.

<b>Resource controls</b>
       <b>smtp_destination_concurrency_limit</b>
              Limit the number of parallel deliveries to the same
              destination.   The  default limit is taken from the
              <b>default_destination_concurrency_limit</b> parameter.

              NB: This limit is enforced by the queue manager.

       <b>smtp_destination_recipient_limit</b>
              Limit the number of recipients per  message  deliv-
              ery.    The   default   limit  is  taken  from  the
              <b>default_destination_recipient_limit</b> parameter.

       <b>smtp_mx_address_limit</b>
              An upper bound on the number of MX (mail exchanger)
              IP  addresses that the SMTP client will try to con-
              nect to, before giving up or sending the mail to  a
              fall-back relay host.

              Specify zero to disable the limit.

       <b>smtp_mx_session_limit</b>
              An  upper bound on the number of SMTP sessions that
              the SMTP client will engage in before giving up  or
              sending the mail to a fall-back relay host.

              Specify zero to disable the limit.

       <b>smtp_backup_on_soft_error</b>
              The  types  of  recoverable  error that qualify for
              sending a recipient to a backup mail server or to a
              fall-back relay host.  Specify zero or more of <b>ses-</b>
              <b>sion</b> (SMTP  handshake  failure,  connection  loss),
              <b>message</b>  (failure  of  MAIL  FROM, DATA or "."), or
              <b>recipient</b> (failure of RCPT TO).

              Recipients that do not qualify are deferred.

<b>Timeout controls</b>
       The default time unit is seconds; an  explicit  time  unit
       can  be  specified by appending a one-letter suffix to the
       value: s (seconds), m (minutes), h (hours), d (days) or  w
       (weeks).

       <b>smtp_connect_timeout</b>
              Timeout  for  completing  a TCP connection. When no
              connection can be made  within  the  deadline,  the
              SMTP  client  tries  the  next  address on the mail
              exchanger list.

       <b>smtp_helo_timeout</b>
              Timeout for receiving  the  SMTP  greeting  banner.
              When  the server drops the connection without send-
              ing a greeting banner, or when it sends no greeting
              banner  within  the deadline, the SMTP client tries
              the next address on the mail exchanger list.

       <b>smtp_helo_timeout</b>
              Timeout for  sending  the  <b>HELO</b>  command,  and  for
              receiving the server response.

       <b>smtp_xforward_timeout</b>
              Timeout  for  sending the <b>XFORWARD</b> command, and for
              receiving the server response.

       <b>smtp_mail_timeout</b>
              Timeout for sending the <b>MAIL FROM</b> command, and  for
              receiving the server response.

       <b>smtp_rcpt_timeout</b>
              Timeout  for  sending  the <b>RCPT TO</b> command, and for
              receiving the server response.

       <b>smtp_data_init_timeout</b>
              Timeout for  sending  the  <b>DATA</b>  command,  and  for
              receiving the server response.

       <b>smtp_data_xfer_timeout</b>
              Timeout for sending the message content.

       <b>smtp_data_done_timeout</b>
              Timeout  for  sending  the  "<b>.</b>"  command,  and  for
              receiving the server response. When no response  is
              received,  a warning is logged that the mail may be
              delivered multiple times.

       <b>smtp_rset_timeout</b>
              Timeout for sending the <b>RSET</b> command.

       <b>smtp_quit_timeout</b>
              Timeout for  sending  the  <b>QUIT</b>  command,  and  for
              receiving the server response.

<b>SEE ALSO</b>
       <a href="bounce.8.html">bounce(8)</a> non-delivery status reports
       <a href="master.8.html">master(8)</a> process manager
       <a href="qmgr.8.html">qmgr(8)</a> queue manager
       syslogd(8) system logging

<b>LICENSE</b>
       The  Secure  Mailer  license must be distributed with this
       software.

<b>AUTHOR(S)</b>
       Wietse Venema
       IBM T.J. Watson Research
       P.O. Box 704
       Yorktown Heights, NY 10598, USA

                                                          SMTP(8)
</pre> </body> </html>
